/* CDP-Template 2015-06-09 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery","sylvester"],function(){return b(a.CDP||(a.CDP={}))}):b(a.CDP||(a.CDP={}))}(this,function(a){a.Tools=a.Tools||{};var a;!function(a){var b;!function(a){var b=function(){function a(){}return Object.defineProperty(a,"is3dSupported",{get:function(){return null==a._is3dSupported&&(a._is3dSupported=a.has3d()),a._is3dSupported},enumerable:!0,configurable:!0}),Object.defineProperty(a,"isTransitionSupported",{get:function(){return null==a._isTransitionSupported&&(a._isTransitionSupported=a.supportsTransitions()),a._isTransitionSupported},enumerable:!0,configurable:!0}),Object.defineProperty(a,"transitionEnd",{get:function(){return"transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"},enumerable:!0,configurable:!0}),Object.defineProperty(a,"cssPrefixes",{get:function(){return["-webkit-","-moz-","-ms-","-o-",""]},enumerable:!0,configurable:!0}),Object.defineProperty(a,"cssHideBackFace",{get:function(){return{"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","-o-backface-visibility":"hidden","backface-visibility":"hidden"}},enumerable:!0,configurable:!0}),a.buildCssTransformString=function(b,c,d){return a.buildCssScaleString(b)+" "+a.buildCssTranslateString(c,d)},a.buildCssScaleString=function(b){return a.is3dSupported?"scale3d("+b+","+b+",1.0)":"scale("+b+","+b+")"},a.buildCssTranslateString=function(b,c){return a.is3dSupported?"translate3d("+b+"px,"+c+"px,0px)":"translate("+b+"px,"+c+"px)"},a.getCssMatrixValue=function(b,c){for(var d=0,e=0,f=0,g=0,h=0;h<a.cssPrefixes.length;h++){var i=$(b).css(a.cssPrefixes[h]+"transform");if(i){var j=-1!==i.indexOf("3d")?!0:!1;i=i.replace("matrix3d","").replace("matrix","").replace(/[^\d.,-]/g,"");var k=i.split(",");d=Number(k[j?12:4]),e=Number(k[j?13:5]),f=Number(k[0]),g=Number(k[j?5:3]);break}}switch(c){case"translateX":return isNaN(d)?0:d;case"translateY":return isNaN(e)?0:e;case"scaleX":return isNaN(f)?1:f;case"scaleY":return isNaN(g)?1:g;default:return 0}},a.clearTransformsTransitions=function(b){var c=$(b);a.isTransitionSupported||c.stop(!0,!0),c.off(a.transitionEnd);for(var d={},e={},f=0;f<a.cssPrefixes.length;f++)d[a.cssPrefixes[f]+"transform"]="",e[a.cssPrefixes[f]+"transition"]="";c.css(d).css(e)},a.clearTransitions=function(b){var c=$(b);a.isTransitionSupported||c.stop(!0,!0),c.off(a.transitionEnd);for(var d={},e=0;e<a.cssPrefixes.length;e++)d[a.cssPrefixes[e]+"transition"]="";c.css(d)},a.setFadeProperty=function(b,c,d){for(var e={},f=c/1e3+"s",g=" "+f+" "+d,h=0;h<a.cssPrefixes.length;h++)e[a.cssPrefixes[h]+"transition"]="opacity"+g+","+a.cssPrefixes[h]+"transform"+g;$(b).css(e)},a.moveImage=function(b,c,d,e,f,g,h){null!=$M?a.transformElement(f,{duration:g,callback:h,scale:d,offsetX:b,offsetY:c}):a.moveImageNoTranslate(b,c,f,g,h)},a.moveImageNoTranslate=function(a,b,c,d,e){$(c).animate({left:a+"px",top:b+"px",bottom:-1*b+"px",right:-1*a+"px"},d,function(){"function"==typeof e&&e()})},a.has3d=function(){if(null!=Modernizr&&null!=Modernizr.csstransforms3d)return Modernizr.csstransforms3d;var a=document.createElement("p"),b=!0,c={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(a,null);for(var d in c)null!=a.style[d]&&(a.style[d]="translate3d(1px,1px,1px)",b=window.getComputedStyle(a).getPropertyValue(c[d]));return document.body.removeChild(a),null!=b&&b.length>0&&"none"!==b},a.supportsTransitions=function(){if(null!=Modernizr&&null!=Modernizr.csstransitions)return Modernizr.csstransitions;var a=10,b=a,c=navigator.userAgent,d=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");return null!==d.exec(c)&&(b=parseFloat(RegExp.$1)),a>b?!1:!0},a.transformElement=function(b,c){var d="number"==typeof c.duration?c.duration:0,e="function"==typeof c.callback?c.callback:null,f="";c.timing=c.timing||"ease-in",c.scale="undefined"!=typeof c.scale?c.scale:1,c.scale=c.scale||.001,f=c.transformValue?c.transformValue:a.is3dSupported?a.transformElement3D(c):a.transformElement2D(c);for(var g=d/1e3+"s",h={},i={},j=0;j<a.cssPrefixes.length;j++)h[a.cssPrefixes[j]+"transform"]=f,i[a.cssPrefixes[j]+"transition"]="all "+g+" "+c.timing,c.delay&&(h[a.cssPrefixes[j]+"transition-delay"]=c.delay/1e3+"s");var k=$(b);k.css(i).css(h),"undefined"!=typeof c.opacity&&k.css("opacity",c.opacity),setTimeout(function(){null!==e&&e()},d||0)},a.transformElement2D=function(a){var b=a.scale,c=$M([[b,0,0],[0,b,0],[0,0,1]]),d=a.offsetX||0,e=a.offsetY||0,f=$M([[1,0,d],[0,1,e],[0,0,1]]),g="undefined"!=typeof a.rotateZ?Math.cos(a.rotateZ):1,h="undefined"!=typeof a.rotateZ?Math.sin(-a.rotateZ):0,i="undefined"!=typeof a.rotateZ?Math.sin(a.rotateZ):0,j="undefined"!=typeof a.rotateZ?Math.cos(a.rotateZ):1,k=$M([[g,h,0],[i,j,0],[0,0,1]]),l=f.x(c).x(k);return"matrix("+l.e(1,1).toFixed(10)+","+l.e(2,1).toFixed(10)+","+l.e(1,2).toFixed(10)+","+l.e(2,2).toFixed(10)+","+l.e(1,3).toFixed(10)+","+l.e(2,3).toFixed(10)+")"},a.transformElement3D=function(a){var b=a.scale,c=$M([[b,0,0,0],[0,b,0,0],[0,0,b,0],[0,0,0,1]]),d=a.offsetX||0,e=a.offsetY||0,f=a.offsetZ||0,g=$M([[1,0,0,0],[0,1,0,0],[0,0,1,0],[d,e,f,1]]),h="undefined"!=typeof a.rotateX?Math.cos(a.rotateX):1,i="undefined"!=typeof a.rotateX?Math.sin(-a.rotateX):0,j="undefined"!=typeof a.rotateX?Math.sin(a.rotateX):0,k="undefined"!=typeof a.rotateX?Math.cos(a.rotateX):1,l=$M([[1,0,0,0],[0,h,i,0],[0,j,k,0],[0,0,0,1]]),m="undefined"!=typeof a.rotateY?Math.cos(a.rotateY):1,n="undefined"!=typeof a.rotateY?Math.sin(a.rotateY):0,o="undefined"!=typeof a.rotateY?Math.sin(-a.rotateY):0,p="undefined"!=typeof a.rotateY?Math.cos(a.rotateY):1,q=$M([[m,0,n,0],[0,1,0,0],[o,0,p,0],[0,0,0,1]]),r="undefined"!=typeof a.rotateZ?Math.cos(a.rotateZ):1,s="undefined"!=typeof a.rotateZ?Math.sin(-a.rotateZ):0,t="undefined"!=typeof a.rotateZ?Math.sin(a.rotateZ):0,u="undefined"!=typeof a.rotateZ?Math.cos(a.rotateZ):1,v=$M([[r,s,0,0],[t,u,0,0],[0,0,1,0],[0,0,0,1]]),w=l.x(q).x(v).x(c).x(g);return"matrix3d("+w.e(1,1).toFixed(10)+","+w.e(1,2).toFixed(10)+","+w.e(1,3).toFixed(10)+","+w.e(1,4).toFixed(10)+","+w.e(2,1).toFixed(10)+","+w.e(2,2).toFixed(10)+","+w.e(2,3).toFixed(10)+","+w.e(2,4).toFixed(10)+","+w.e(3,1).toFixed(10)+","+w.e(3,2).toFixed(10)+","+w.e(3,3).toFixed(10)+","+w.e(3,4).toFixed(10)+","+w.e(4,1).toFixed(10)+","+w.e(4,2).toFixed(10)+","+w.e(4,3).toFixed(10)+","+w.e(4,4).toFixed(10)+")"},a._is3dSupported=void 0,a._isTransitionSupported=void 0,a}();a.CSS=b}(b=a.Tools||(a.Tools={}))}(a||(a={}));var a;return function(a){var b;!function(a){function b(a){return d+a}var c=c||window,d="",e=c.Config;e&&"string"==typeof e.namespace&&(d=e.namespace+"_"),a.touchEvent=b;var f;!function(a){function b(a){for(var b in k)b||(b=window.event),e(k[b],a)}function c(a){for(var b in j)b||(b=window.event),f(j[b],a)}function e(a,b){g(a,b,function(b){var c=[a,Array.prototype.slice.call(arguments)];c[1].shift(),$.prototype.trigger.apply($(b.target),c)})}function f(a,b){$(b).unbind(a)}function g(a,b,c){var d=0,e=0,f=0,g=0,i=0,l=0,m=0,n=0,o=0,p=200,q=300,r=5,s=!1,t=!1,u=!1,v=!1,w=function(a){i=a.originalEvent.touches[0].pageX,l=a.originalEvent.touches[1].pageX,m=a.originalEvent.touches[0].pageY,n=a.originalEvent.touches[1].pageY},x=function(a){var b=!1,c=0;return a.offsetY<a.offsetX?(c=a.offsetX,a.startX>a.endX?b="swipeleft":a.startX<a.endX&&(b="swiperight")):(c=a.offsetY,a.startY>a.endY?b="swipeup":a.startY<a.endY&&(b="swipedown")),{swipeValue:b,swipeOffset:c}};h({genericEvent:j.end,customEvent:a,element:b,handler:function(b){if(b.originalEvent.touches&&2!==b.originalEvent.touches.length&&(t&&a===k.pinchEnd&&c(b),t=!1),b.originalEvent.touches&&0===b.originalEvent.touches.length||!b.originalEvent.touches){f=b.originalEvent.changedTouches?b.originalEvent.changedTouches[0].pageX:b.originalEvent.pageX,g=b.originalEvent.changedTouches?b.originalEvent.changedTouches[0].pageY:b.originalEvent.pageY,s=!1;var h=Math.abs(f-d),i=Math.abs(g-e),j=x({offsetX:h,offsetY:i,startX:d,startY:e,endX:f,endY:g});j.swipeValue&&a===k.swipe?c(b,j.swipeValue,Math.abs(j.swipeOffset)):a===k.dragEnd?c(b,f,g,h,i):2===o&&v&&a===k.doubleTap?(v=!1,o=0,c(b,f,g)):u&&a===k.tap&&Math.abs(h)<=r&&Math.abs(i)<=r&&1!==b.button&&2!==b.button&&(u=!1,c(b,f,g))}}}),h({genericEvent:j.move,customEvent:a,element:b,handler:function(b){if(b.preventDefault(),s){var f=b.originalEvent.changedTouches?b.originalEvent.changedTouches[0].pageX:b.originalEvent.pageX,g=b.originalEvent.changedTouches?b.originalEvent.changedTouches[0].pageY:b.originalEvent.pageY;a===k.drag&&(b.originalEvent.changedTouches&&1===b.originalEvent.changedTouches.length&&b.originalEvent.touches&&1===b.originalEvent.touches.length||!b.originalEvent.changedTouches)&&c(b,f,g,f-d,g-e)}if(b.originalEvent.touches&&t&&(a===k.pinchIn||a===k.pinchOut)&&2===b.originalEvent.touches.length){var h=b.originalEvent.touches[0].pageX,j=b.originalEvent.touches[1].pageX,o=b.originalEvent.touches[0].pageY,p=b.originalEvent.touches[1].pageY,q=Math.round(Math.sqrt((h-i)*(h-i)+(o-m)*(o-m))),r=Math.round(Math.sqrt((j-l)*(j-l)+(p-n)*(p-n))),u=Math.round(Math.sqrt((l-i)*(l-i)+(n-m)*(n-m))),v=Math.round(Math.sqrt((j-h)*(j-h)+(p-o)*(p-o))),w=q>r?q:r,x=u>v?k.pinchIn:k.pinchOut;u===v&&(x=!1),x&&x===k.pinchOut&&a===k.pinchOut?c(b,w):x&&x===k.pinchIn&&a===k.pinchIn&&c(b,w)}}}),h({genericEvent:j.start,customEvent:a,element:b,handler:function(b){b.originalEvent&&b.originalEvent.touches&&2!==b.originalEvent.touches.length&&(t&&a===k.pinchEnd&&c(b),t=!1),b.originalEvent&&b.originalEvent.touches&&2===b.originalEvent.touches.length?(t=!0,a===k.pinchStart&&c(b),w(b)):b.originalEvent?(d=b.originalEvent.touches?b.originalEvent.touches[0].pageX:b.originalEvent.pageX,e=b.originalEvent.touches?b.originalEvent.touches[0].pageY:b.originalEvent.pageY,s=!0,b.originalEvent.touches&&a===k.dragStart&&1===b.originalEvent.touches.length||a===k.dragStart&&!b.originalEvent.touches?c(b,d,e):b.originalEvent.touches&&a===k.doubleTap&&1===b.originalEvent.touches.length||a===k.doubleTap&&!b.originalEvent.touches?(v||setTimeout(function(){v=!1,o=0},q),v=!0,o++):(b.originalEvent.touches&&a===k.tap&&1===b.originalEvent.touches.length||a===k.tap&&!b.originalEvent.touches)&&(u||setTimeout(function(){u=!1},p),u=!0)):c(b)}})}function h(a){var b=a.genericEvent,c=a.customEvent,d=a.element,e=a.handler,f=d.events||{};f[c]||(f[c]=[]),f[c].push({handler:e,genericEvent:b}),d.events=f,$(d).bind(b,e)}var i=window.navigator.msPointerEnabled,j={start:"touchstart mousedown",end:"touchend mouseup",move:"touchmove mousemove"},k={drag:d+"drag",dragStart:d+"dragstart",dragEnd:d+"dragend",swipe:d+"swipe",tap:d+"tap",doubleTap:d+"doubletap",pinchStart:d+"pinchstart",pinchEnd:d+"pinchend",pinchIn:d+"pinchin",pinchOut:d+"pinchout"};i&&(j.start="MSPointerDown mousedown",j.end="MSPointerUp mouseup",j.move="MSPointerMove mousemove"),a.setTarget=b,a.removeTarget=c,a._bindToElement=e}(f=a.Touch||(a.Touch={}))}(b=a.Tools||(a.Tools={}))}(a||(a={})),a.Tools});